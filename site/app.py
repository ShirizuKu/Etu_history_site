from flask import Flask, render_template, request

app = Flask(__name__)
app.secret_key = 'your_secret_key'

QUIZ_DATA = {
    '1': {
        'title': 'Беспроводной телеграф',
        'info': 'Изобретён Александром Степановичем Поповым в 1895 году. Профессор кафедры физики ЛЭТИ. Первая в мире система беспроводной связи, использовавшая электромагнитные волны для передачи сигналов. Попов продемонстрировал работу устройства на заседании Русского физико-химического общества, заложив основы радиотехники. Относился к направлению радиотехники и электроники.'
    },
    '2': {
        'title': 'Электромагнитный телеграф',
        'info': 'Создан Павлом Львовичем Шиллингом в 1832 году. Пионер электротехники, чьи работы легли в основу кафедры телеграфии ЛЭТИ. Устройство использовало электрические импульсы для передачи букв и цифр по проводам, став прообразом современных систем связи. Телеграф Шиллинга был первым практическим применением электричества в коммуникациях.'
    },
    '3': {
        'title': 'Первая ЭВМ',
        'info': 'Разработана Сергеем Алексеевичем Лебедевым в 1950 году. Основатель кафедры вычислительной техники ЛЭТИ. Малая электронная счётная машина (МЭСМ) выполняла до 3,000 операций в секунду и использовалась для решения задач ядерной физики и космических программ. Это был прорыв в области цифровых вычислений в СССР.'
    },
    '4': {
        'title': 'Радиолокационная установка',
        'info': 'Создана в 1930-х годах коллективом кафедры радиотехники под руководством Анатолия Александровича Харкевича. Устройство обнаруживало воздушные цели с помощью отражённых радиоволн. Технология стала основой систем ПВО во время Великой Отечественной войны и позже использовалась в гражданской авиации.'
    },
    '5': {
        'title': 'Квантовый компьютер',
        'info': 'Современные разработки ведутся на кафедре квантовой электроники и оптико-электронных устройств. Пионерские работы начаты в 2010-х годах под руководством Владимира Захарченко. Устройство использует кубиты для параллельных вычислений, решая задачи криптографии и моделирования молекул. ЛЭТИ участвует в создании алгоритмов для квантовых процессоров в коллаборации с РКЦ.'
    }
}

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/topic1')
def topic1():
    return render_template('topic1.html')

@app.route('/topic2')
def topic2():
    return render_template('topic2.html')

@app.route('/topic3')
def topic3():
    return render_template('topic3.html')

@app.route('/quiz', methods=['GET', 'POST'])
def quiz():
    result = None
    user_answers = {}
    
    if request.method == 'POST':
        user_answers = request.form.to_dict()
        # Исправленная проверка:
        all_correct = all(
            QUIZ_DATA[img_id]['title'] == answer_text  # Сравниваем title, а не весь объект
            for img_id, answer_text in user_answers.items()
        )
        result = "Все верно!" if all_correct else "Попробуй ещё"
    
    return render_template(
        'quiz.html',
        quiz_data=QUIZ_DATA,
        result=result,
        user_answers=user_answers
    )

if __name__ == '__main__':
    app.run(debug=True)